webpackJsonp([24],{1642:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.reportPhotoImpressions=void 0;var r=o(0),i=n(r),a=o(5),s=o(1668),l=n(s),u=o(2),c=o(15),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(c),p=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),f=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};t.reportPhotoImpressions=function(e){var t={photo:r.PropTypes.object.isRequired,position:r.PropTypes.number.isRequired,reportPhotoImpression:r.PropTypes.func.isRequired},o=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return p(o,t),o.prototype.reportImpression=function(e){if(e){var t=this.props,o=t.photo,n=t.position;(0,t.reportPhotoImpression)({photo:{id:o.id,position:n}})}},o.prototype.render=function(){var t=i.default.createElement(e,f({},this.props));return u.isBrowser&&(0,u.checkSupportsIntersectionObservers)()?i.default.createElement(l.default,{onChange:this.reportImpression.bind(this),threshold:.5},t):t},o}(r.Component);o.displayName="WrappedReportPhotoImpressionsComponent",o.propTypes=t;var n={reportPhotoImpression:d.reportPhotoImpression};return(0,a.connect)(null,n)(o)}},1643:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1644);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1644:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){return a.default.createElement("div",{className:c.default.container},a.default.createElement("a",{href:"/"},a.default.createElement(l.default,{type:"logo",className:c.default.logo})),a.default.createElement("p",{className:c.default.text},"Make something awesome"))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=o(0),a=n(i),s=o(21),l=n(s),u=o(1645),c=n(u)},1645:function(e,t){e.exports={colorGrey:"#999","--sm":"(--sm)","--md-min":"(--md-min)",container:"_2WMKE",logo:"_1Ig-9",text:"_1cQDt"}},1650:function(e,t,o){"use strict";function n(e){var t=e.downloadButtonXp,o=e.inFollowingFeed;return[a.VARIANTS.showArrow,a.VARIANTS.showBottomBar].includes(t)&&!o}function r(e){var t=l.safeLocalStorageHelpers.hasItem(s.HAS_DOWNLOADED_A_PHOTO),o=e.downloadButtonXp===a.VARIANTS.showArrow;return n(e)&&o&&!t}function i(e){var t=e.downloadButtonXp,o=e.inFollowingFeed;return t===a.VARIANTS.showWord&&!o}Object.defineProperty(t,"__esModule",{value:!0}),t.checkHasWorkingHover=t.ActionsModes=t.ActionsStates=void 0,t.checkShouldShowDownloadButton=n,t.checkShouldShowTooltip=r,t.checkShouldShowLabel=i;var a=o(567),s=o(212),l=o(2),u=t.ActionsStates=void 0;!function(e){e.All="All",e.AddToCollectionButton="AddToCollectionButton",e.AddToCollectionButtonAndPhotographerInfo="AddToCollectionButtonAndPhotographerInfo",e.DownloadButton="DownloadButton"}(u||(t.ActionsStates=u={}));var c=t.ActionsModes=void 0;!function(e){e.All="All",e.CollectionsOnboarding="CollectionsOnboarding"}(c||(t.ActionsModes=c={}));var d=function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream};t.checkHasWorkingHover=function(){return!d()}},1651:function(e,t){e.exports={floatLeft:"_3YIV2",floatRight:"tPMQE","--sm-min":"(--sm-min)",colorLightGrey:"#ddd",container:"y5w1y",photo:"cV68d",photoInfo:"hduMF",leftActions:"_31wG7 _3YIV2",rightActions:"_287Ma tPMQE",user:"_114MZ",collectionButtonContainer:"_1XDiz",userLink:"_3isoq",userImageContainer:"_8p1N4 _3YIV2",userAvatar:"_1fYZF",userName:"_1imKo _3YIV2",userTopLink:"_1f9xN"}},1652:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1653);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1653:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SmallPhoto=void 0;var r=o(0),i=n(r),a=o(5),s=o(4),l=n(s),u=o(27),c=n(u),d=o(156),p=n(d),f=o(15),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(f),m=o(2),v=o(322),_=o(66),y=o(104),P=o(211),g=n(P),b=o(569),w=n(b),T=o(570),O=n(T),A=o(571),S=n(A),E=o(1654),M=n(E),B=o(1650),C=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),j={inFollowingFeed:!1,shouldIncludeLink:!0,actionsMode:B.ActionsModes.All},I=function(e){function t(t){var o=e.call(this,t)||this;return o.handleMouseMove=o.handleMouseMove.bind(o),o.handleMouseLeave=o.handleMouseLeave.bind(o),o.state={isHovering:!1},o}return C(t,e),t.prototype.getActionsState=function(){var e=this.state.isHovering,t=this.props,o=t.actionsMode,n=t.jsLoaded,r=t.downloadButtonXp,i=t.inFollowingFeed,a=(0,B.checkShouldShowDownloadButton)({downloadButtonXp:r,inFollowingFeed:i});switch(o){case B.ActionsModes.CollectionsOnboarding:return e||!n?B.ActionsStates.AddToCollectionButtonAndPhotographerInfo:B.ActionsStates.AddToCollectionButton;case B.ActionsModes.All:return e||!n?B.ActionsStates.All:a&&!e?B.ActionsStates.DownloadButton:void 0}},t.prototype.handleMouseMove=function(){(0,B.checkHasWorkingHover)()&&!this.state.isHovering&&this.setState({isHovering:!0})},t.prototype.handleMouseLeave=function(){this.setState({isHovering:!1})},t.prototype.renderPhotoInfo=function(){var e=this,t=this.props,o=t.photo,n=t.linkTo,r=t.setSelectedPhoto,a=t.windowWidth,s=t.location,u=t.imageUrl,d=t.showPhotoInfoOnHover,p=t.shouldIncludeLink,f=t.isNewPhotosPageXp,h=!(0,m.checkIsPhone)(a);return i.default.createElement("div",{className:(0,l.default)(M.default.photoInfo,void 0!==this.getActionsState()&&M.default.photoInfoIsShown),onMouseMove:h&&this.handleMouseMove,onMouseLeave:h&&this.handleMouseLeave},p&&i.default.createElement(c.default,{title:"View the photo by "+o.user.name,to:n||(0,m.buildPhotoLink)(o,s,a,{isNewPhotosPageXp:f,initialSrc:u}),className:M.default.photoInfoLink,onClick:function(){f||r({id:o.id,ref:e.linkElem})}}),d&&this.renderActions())},t.prototype.renderLikeButton=function(){var e=this.props,t=e.location,o=e.photo;return i.default.createElement(w.default,{type:"alt",location:t,photo:o})},t.prototype.renderAddToCollectionButton=function(){var e=this.props,t=e.location,o=e.photo;return i.default.createElement("div",{className:M.default.addToCollectionButtonContainer},i.default.createElement(S.default,{className:M.default.collectionButton,type:"alt",photo:o,location:t}))},t.prototype.renderDownloadButton=function(){var e=this.props,t=e.photo,o=e.downloadButtonXp,n=e.inFollowingFeed,r=(0,B.checkShouldShowTooltip)({downloadButtonXp:o,inFollowingFeed:n}),a=(0,B.checkShouldShowLabel)({downloadButtonXp:o,inFollowingFeed:n});return i.default.createElement("div",{className:M.default.buttonDownloadContainer},i.default.createElement(O.default,{type:"alt",photo:t,showLabel:a,showTooltip:r}))},t.prototype.renderUserLink=function(){var e=this.props.photo.user;return i.default.createElement("div",{className:M.default.userContainer},i.default.createElement(g.default,{includeAvatar:!0,user:e,type:"alt"}))},t.prototype.renderTopActions=function(){switch(this.getActionsState()){case B.ActionsStates.AddToCollectionButton:case B.ActionsStates.AddToCollectionButtonAndPhotographerInfo:return i.default.createElement("div",{className:M.default.actionsTop},this.renderAddToCollectionButton());case B.ActionsStates.All:return i.default.createElement("div",{className:M.default.actionsTop},this.renderLikeButton(),this.renderAddToCollectionButton());case B.ActionsStates.DownloadButton:case void 0:return}},t.prototype.renderBottomActions=function(){switch(this.getActionsState()){case B.ActionsStates.All:return i.default.createElement("div",{className:M.default.actionsBottom},this.renderUserLink(),this.renderDownloadButton());case B.ActionsStates.AddToCollectionButtonAndPhotographerInfo:return i.default.createElement("div",{className:M.default.actionsBottom},this.renderUserLink());case B.ActionsStates.DownloadButton:return i.default.createElement("div",{className:M.default.actionsBottom},this.renderDownloadButton());case B.ActionsStates.AddToCollectionButton:case void 0:return}},t.prototype.renderActions=function(){return void 0!==this.getActionsState()?i.default.createElement("div",null,this.renderTopActions(),this.renderBottomActions()):null},t.prototype.renderImage=function(){var e=this,t=this.props,o=t.photo,n=t.width,r=t.height,a=t.imageUrl,s=t.fillWidth,u=t.children,c=t.followingFeedClassName,d=t.inFollowingFeed,f=t.photoRef,h={backgroundImage:(0,m.urlToBackgroundImage)(a),backgroundColor:o.color,backgroundSize:"cover",width:s?"100%":n,height:r};return i.default.createElement("div",{style:d?h:{},className:(0,l.default)(d&&(0,l.default)(M.default.photo,c))},!d&&i.default.createElement("img",{alt:o.description||null,src:a,ref:function(t){(0,p.default)(f)&&f(t),e.linkElem=t},className:M.default.imgPhoto,style:{width:s?"100%":n,height:r}}),u)},t.prototype.render=function(){var e=this.props.containerClassName;return i.default.createElement("div",{className:(0,l.default)(M.default.container,e)},this.renderImage(),this.renderPhotoInfo())},t.displayName="SmallPhoto",t.defaultProps=j,t}(r.PureComponent);t.SmallPhoto=I;var R=function(e,t){return{jsLoaded:(0,v.getJsLoaded)(e),windowWidth:(0,_.getWindowWidth)(e),downloadButtonXp:(0,y.getDownloadButtonXp)(e),isNewPhotosPageXp:(0,y.getIsNewPhotosPageXp)(e)}},N={setSelectedPhoto:h.setSelectedPhoto};t.default=(0,a.connect)(R,N)(I)},1654:function(e,t){e.exports={floatLeft:"_3YIV2",floatRight:"tPMQE","--sm-min":"(--sm-min)",colorPink:"#f15151",colorLightGrey:"#ddd",hoverTransition:"_2tPAp",container:"_3vgBX",photo:"_1hz5D",imgPhoto:"KW7g_ _1hz5D",photoInfo:"bQJ8Z",photoInfoIsShown:"_2j4gG",photoInfoLink:"_23lr1",actionsTop:"_2yfpM",actionsBottom:"_1a5YS",userContainer:"CpQi5 _3YIV2",buttonDownloadContainer:"_3i-Ef tPMQE",addToCollectionButtonContainer:"_3W6mQ"}},1657:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1658);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1658:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FeedContainer=void 0;var r=o(0),i=n(r),a=o(5),s=o(15),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(s),u=o(1659),c=n(u),d=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),p={setContentWidth:r.PropTypes.func.isRequired,children:r.PropTypes.element.isRequired},f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype.componentDidMount=function(){this.setContentWidth(),window.addEventListener("resize",this.handleResize.bind(this))},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.handleResize.bind(this))},t.prototype.setContentWidth=function(){var e=this.props.setContentWidth;this.elem&&e(this.elem.offsetWidth-24)},t.prototype.handleResize=function(){this.setContentWidth()},t.prototype.render=function(){var e=this,t=this.props.children;return i.default.createElement("div",{className:c.default.container,ref:function(t){e.elem=t}},t)},t}(r.Component);t.FeedContainer=f,f.propTypes=p;var h={setContentWidth:l.setContentWidth};t.default=(0,a.connect)(null,h)(f)},1659:function(e,t){e.exports={container:"Nqw-T _22ZDn dvlCB"}},1664:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1665);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1665:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return void 0===e&&(e=0),void 0===t&&(t=[]),{totalHeight:e,photos:t}}function i(e){var t=0,o=e[0];return e.forEach(function(e,n){e.totalHeight<o.totalHeight&&(t=n,o=e)}),t}function a(e){return Array.from({length:e}).map(function(){return r()})}Object.defineProperty(t,"__esModule",{value:!0}),t.Masonry=void 0;var s=o(0),l=n(s),u=o(5),c=o(4),d=n(c),p=o(15),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(p),h=o(66),m=o(104),v=o(567),_=o(2),y=o(1666),P=n(y),g=o(1672),b=o(1673),w=n(b),T=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),O={photos:s.PropTypes.array.isRequired,location:s.PropTypes.object.isRequired,smallPhotoProps:s.PropTypes.object,windowWidth:s.PropTypes.number,downloadButtonXp:s.PropTypes.oneOf(Object.keys(v.VARIANTS)),showDownloadBottomBar:s.PropTypes.func.isRequired,hideDownloadBottomBar:s.PropTypes.func.isRequired,shouldUseContainerPadding:s.PropTypes.bool},A={shouldUseContainerPadding:!0},S=function(e){function t(t){var o=e.call(this,t)||this;return o.state={gridCount:(0,_.isPhoneOrTablet)(t.windowWidth)?2:3},o.renderGrid=o.renderGrid.bind(o),o}return T(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.downloadButtonXp,o=e.showDownloadBottomBar;(0,g.checkShouldShowDownloadBottomBar)(t)&&o()},t.prototype.componentWillUpdate=function(e){var t=this.props.windowWidth;e.windowWidth!==t&&((0,_.isPhoneOrTablet)(e.windowWidth)?this.setState({gridCount:2}):this.setState({gridCount:3}))},t.prototype.componentWillUnmount=function(){this.props.hideDownloadBottomBar()},t.prototype.getGridData=function(e){var t=this.props.photos,o=a(e);return t.forEach(function(e){var t=o[i(o)];e.height&&e.width&&(t.totalHeight+=e.height/e.width,t.photos.push(e))}),o.map(function(e){return e.photos})},t.prototype.renderGrid=function(e,t){var o=this.props,n=o.location,r=o.photos,i=o.smallPhotoProps,a=this.state.gridCount;return l.default.createElement("div",{key:t,ref:"MasonryGrid"+t,className:(0,d.default)(w.default.Grid,3===a&&w.default.GridThree,2===a&&w.default.GridTwo,1===a&&w.default.GridOne)},e.map(function(e,t){var o=r.indexOf(e);return l.default.createElement(P.default,{smallPhotoProps:i,gridCount:a,photo:e,position:o,key:t,location:n})}))},t.prototype.render=function(){var e=this.state.gridCount,t=this.props.shouldUseContainerPadding,o=this.getGridData(e).map(this.renderGrid);return l.default.createElement("div",{id:"gridMulti",className:(0,d.default)(w.default.container,t&&w.default.containerWithPadding),"data-test":g.TEST_ATTRIBUTE},o)},t}(s.Component);t.Masonry=S,S.displayName="Masonry",S.propTypes=O,S.defaultProps=A;var E=function(e){return{windowWidth:(0,h.getWindowWidth)(e),downloadButtonXp:(0,m.getDownloadButtonXp)(e)}},M={showDownloadBottomBar:f.showDownloadBottomBar,hideDownloadBottomBar:f.hideDownloadBottomBar};t.default=(0,u.connect)(E,M)(S)},1666:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1667);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1667:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(0),i=n(r),a=o(5),s=o(60),l=o(572),u=o(41),c=o(1652),d=n(c),p=o(1642),f=o(1670),h=o(1671),m=n(h),v=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_={location:r.PropTypes.object.isRequired,smallPhotoProps:r.PropTypes.object,contentWidth:r.PropTypes.number,pixelRatio:r.PropTypes.number.isRequired,photo:r.PropTypes.object.isRequired,gridCount:r.PropTypes.number.isRequired},y=function(e){var t=e.smallPhotoProps,o=e.gridCount,n=e.location,r=e.contentWidth,a=e.pixelRatio,s=e.photo,l=Math.ceil(r/o-32),c=(0,u.getImageSizeAndImgixUrl)({photo:s,isMasonry:!0,parentWidth:l,pixelRatio:a}),p=c.imageUrl,h=c.imageWidth,_=c.imageHeight;return i.default.createElement("div",{className:m.default.photoContainer,"data-test":f.TEST_ATTRIBUTE},i.default.createElement(d.default,v({fillWidth:!0,showPhotoInfoOnHover:!0,width:h,height:_,imageUrl:p,photo:s,location:n},t)))};y.displayName="MasonryPhoto",y.propTypes=_;var P=function(e){return{contentWidth:(0,l.getContentWidth)(e),pixelRatio:(0,s.getPixelRatio)(e)}};t.default=(0,p.reportPhotoImpressions)((0,a.connect)(P)(y))},1668:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var o={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(0),c=(n(u),o(105)),d=n(c),p=o(1669),f=function(e){return"function"==typeof e},h=function(e){function t(){var e,o,n,r;i(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return o=n=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n.state={inView:!1},n.node=null,n.handleNode=function(e){n.node&&(0,p.unobserve)(n.node),e&&(0,p.observe)(e,n.handleChange,n.props.threshold),n.node=e},n.handleChange=function(e){return n.setState({inView:e})},r=o,a(n,r)}return s(t,e),l(t,[{key:"componentWillUpdate",value:function(e,t){this.props.onChange&&t.inView!==this.state.inView&&(this.props.onChange(t.inView),t.inView&&e.unobserve)}},{key:"componentDidUpdate",value:function(e,t){t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&((0,p.unobserve)(this.node),this.node=null)}},{key:"componentWillUnmount",value:function(){this.node&&((0,p.unobserve)(this.node),this.node=null)}},{key:"render",value:function(){var e=this.props,t=e.children,o=e.render,n=e.tag,i=(e.triggerOnce,e.threshold,r(e,["children","render","tag","triggerOnce","threshold"])),a=this.state.inView;return(0,u.createElement)(n,Object.assign({},i,{ref:this.handleNode}),a&&f(o)?o():null,f(t)?t(a):t)}}]),t}(u.Component);h.propTypes={tag:d.default.node,children:d.default.oneOfType([d.default.func,d.default.node]),triggerOnce:d.default.bool,threshold:d.default.number,onChange:d.default.func,render:d.default.func},h.defaultProps={tag:"div",threshold:0,triggerOnce:!1},t.default=h},1669:function(e,t,o){"use strict";function n(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e&&t){var n=s.get(o);n||(n=new IntersectionObserver(i,{threshold:o}),s.set(o,n)),a.set(e,{callback:t,visible:!1,threshold:o}),n.observe(e)}}function r(e){if(e){var t=a.get(e);if(t){a.delete(e);var o=s.get(t.threshold);o&&o.unobserve(e);var n=!1;a.forEach(function(e){e.threshold===t.threshold&&(n=!0)}),o&&!n&&(o.disconnect(),s.delete(t.threshold))}}}function i(e){e.forEach(function(e){if(a.has(e.target)){var t=e.isIntersecting,o=e.intersectionRatio,n=e.target,r=a.get(n),i=r.callback,s=r.visible,l=r.threshold,u=s?o>l:o>=l;void 0!==t&&(u=u&&t),a.set(n,{callback:i,visible:u,threshold:l}),i&&i(u)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.observe=n,t.unobserve=r;var a=new Map,s=new Map;t.default={observe:n,unobserve:r}},1670:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TEST_ATTRIBUTE="photo-component"},1671:function(e,t){e.exports={photoContainer:"_1pn7R"}},1672:function(e,t,o){"use strict";function n(e){var t=r.safeLocalStorageHelpers.hasItem(i.HAS_DOWNLOADED_A_PHOTO);return e===a.VARIANTS.showBottomBar&&!t}Object.defineProperty(t,"__esModule",{value:!0}),t.TEST_ATTRIBUTE=void 0,t.checkShouldShowDownloadBottomBar=n;var r=o(2),i=o(212),a=o(567);t.TEST_ATTRIBUTE="photos-grid-view"},1673:function(e,t){e.exports={floatLeft:"_3YIV2","--sm-min":"(--sm-min)",clearfix:"_1VOuf",container:"_3_WtK _1VOuf",containerWithPadding:"_1C-lZ",Grid:"_1OvAL _3YIV2",GridThree:"_27nWV",GridTwo:"_1eGVY",GridOne:"_3nHtz"}},1684:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1685);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1685:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(0),i=n(r),a=o(1686),s=n(a),l=o(1691),u=n(l),c=o(1692),d={location:r.PropTypes.object.isRequired,photos:r.PropTypes.array},p=function(e){var t=e.location,o=e.photos;return i.default.createElement("div",{id:"gridSingle",className:u.default.container,"data-test":c.TEST_ATTRIBUTE},o.map(function(e,o){return i.default.createElement(s.default,{key:e.id,photo:e,position:o,location:t})}))};p.displayName="PhotosListView",p.propTypes=d,t.default=p},1686:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1687);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1687:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Photo=void 0;var r=o(0),i=n(r),a=o(211),s=n(a),l=o(569),u=n(l),c=o(571),d=n(c),p=o(570),f=n(p),h=o(1688),m=n(h),v=o(1651),_=n(v),y=o(1690),P=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),g={location:r.PropTypes.object.isRequired,photo:r.PropTypes.object.isRequired,position:r.PropTypes.number.isRequired},b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return P(t,e),t.prototype.renderLikeButton=function(){var e=this.props,t=e.location,o=e.photo;return i.default.createElement(u.default,{photo:o,location:t})},t.prototype.renderAddToCollectionButton=function(){var e=this.props,t=e.location,o=e.photo;return i.default.createElement("div",{className:_.default.collectionButtonContainer},i.default.createElement(d.default,{photo:o,location:t}))},t.prototype.renderleftActions=function(){return i.default.createElement("div",{className:_.default.leftActions},this.renderLikeButton(),this.renderAddToCollectionButton())},t.prototype.renderRightActions=function(){var e=this.props.photo;return i.default.createElement("div",{className:_.default.rightActions},i.default.createElement(f.default,{photo:e,showLabel:!0}))},t.prototype.renderUser=function(){var e=this.props.photo.user;return i.default.createElement("div",{className:_.default.user},i.default.createElement(s.default,{includeAvatar:!0,user:e}))},t.prototype.renderPhotoInfo=function(){return i.default.createElement("div",{className:_.default.photoInfo},this.renderleftActions(),this.renderUser(),this.renderRightActions())},t.prototype.renderTopUserLink=function(){var e=this.props.photo.user;return i.default.createElement("div",{className:_.default.userTopLink},i.default.createElement(s.default,{includeAvatar:!0,user:e}))},t.prototype.render=function(){var e=this.props,t=e.location,o=e.photo,n=e.position;return i.default.createElement("div",{className:_.default.container,"data-test":y.TEST_ATTRIBUTE},this.renderTopUserLink(),i.default.createElement(m.default,{location:t,position:n,photo:o}),this.renderPhotoInfo())},t}(r.Component);t.Photo=b,b.displayName="Photo",b.propTypes=g,t.default=b},1688:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1689);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1689:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoImage=void 0;var r=o(0),i=n(r),a=o(27),s=n(a),l=o(5),u=o(15),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(u),d=o(60),p=o(572),f=o(66),h=o(104),m=o(2),v=o(41),_=o(1642),y=o(1651),P=n(y),g=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),b={location:r.PropTypes.object.isRequired,photo:r.PropTypes.object.isRequired,windowWidth:r.PropTypes.number,contentWidth:r.PropTypes.number,pixelRatio:r.PropTypes.number.isRequired,setSelectedPhoto:r.PropTypes.func.isRequired,isNewPhotosPageXp:r.PropTypes.bool.isRequired},w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.prototype.render=function(){var e=this,t=this.props,o=t.photo,n=t.photo.user,r=t.pixelRatio,a=t.location,l=t.setSelectedPhoto,u=t.windowWidth,c=t.contentWidth,d=t.isNewPhotosPageXp,p=(0,m.checkIsPhone)(u)?u:c,f=(0,v.getImageSizeAndImgixUrl)({photo:o,parentWidth:p,pixelRatio:r}),h=f.imageUrl,_=f.imageWidth,y=f.imageHeight;return i.default.createElement(s.default,{ref:function(t){e.elem=t},to:(0,m.buildPhotoLink)(o,a,u,{isNewPhotosPageXp:d}),title:"View the photo By "+n.name,onClick:function(){return l({id:o.id,ref:e.elem})}},i.default.createElement("img",{alt:o.description||null,src:h,className:P.default.photo,style:{width:_,height:y}}))},t}(r.Component);t.PhotoImage=w,w.displayName="PhotoImage",w.propTypes=b;var T=function(e){return{pixelRatio:(0,d.getPixelRatio)(e),windowWidth:(0,f.getWindowWidth)(e),contentWidth:(0,p.getContentWidth)(e),isNewPhotosPageXp:(0,h.getIsNewPhotosPageXp)(e)}},O={setSelectedPhoto:c.setSelectedPhoto};t.default=(0,_.reportPhotoImpressions)((0,l.connect)(T,O)(w))},1690:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TEST_ATTRIBUTE="photo-component"},1691:function(e,t){e.exports={"--xs-max":"(--xs-max)",container:"_1I8cs"}},1692:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TEST_ATTRIBUTE="photos-list-view"},1818:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1819);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1819:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(0),i=n(r),a=o(1820),s=n(a),l={type:r.PropTypes.oneOf(["photos","collections","users","photo-likes","collection-photos"]).isRequired},u=function(e){var t=e.type;return i.default.createElement("div",{className:s.default.emptyStateContainer},i.default.createElement("img",{alt:"No content available",className:s.default.emptyStateImg,src:"/a/img/empty-states/"+t+".png"}))};u.displayName="EmptyState",u.propTypes=l,t.default=u},1820:function(e,t){e.exports={emptyStateContainer:"_1SdCr",emptyStateImg:"_3AIC0",emptyStateDesc:"_4zmjf",cta:"_2d_9Y"}},2136:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(2137);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},2137:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SearchPhotos=void 0;var r=o(0),i=n(r),a=o(5),s=o(27),l=n(s),u=o(26),c=n(u),d=o(580),p=n(d),f=o(18);o(214),o(321),o(213),o(573);var h=o(15),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(h),v=o(30),_=n(v),y=o(104),P=o(2),g=o(76),b=o(66),w=o(222),T=o(220),O=o(1657),A=n(O),S=o(1664),E=n(S),M=o(1684),B=n(M),C=o(1643),j=n(C),I=o(320),R=n(I),N=o(1818),k=n(N),W=o(607),L=n(W),D=o(2138),x=n(D),V=o(2139),U=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),q=(0,g.normalizeResponse)("searchPhotos"),F={search:r.PropTypes.object.isRequired,location:r.PropTypes.object,updateData:r.PropTypes.func.isRequired,addPhotosToSearchPhotoFeed:r.PropTypes.func.isRequired,searchXps:r.PropTypes.object.isRequired,isPhone:r.PropTypes.bool},H=function(e){function t(t){var o=e.call(this,t)||this;return o.fetchPhotos=o.fetchPhotos.bind(o),o}return U(t,e),t.prototype.componentDidMount=function(){this.addScrollSubscription()},t.prototype.componentWillReceiveProps=function(e){e.search.query!==this.props.search.query&&(this.removeScrollSubscription(),this.addScrollSubscription())},t.prototype.componentWillUnmount=function(){this.removeScrollSubscription()},t.prototype.addScrollSubscription=function(){var e=this,t=f.Observable.fromEvent(window,"scroll").filter(function(){return(0,P.shouldFetchMoreContent)()}).map(function(){return e.props.search.photos.lastPageFetched}).distinct();this.scrollSubscription=t.subscribe(this.fetchPhotos)},t.prototype.fetchPhotos=function(){var e=this.props,t=e.search,o=e.searchXps,n=e.updateData,r=e.addPhotosToSearchPhotoFeed,i=t.photos,a=i.maxPage,s=i.lastPageFetched;if(s<a){var l=s+1;_.default.custom.search.photos(t.query,l,T.SEARCH_PER_PAGE,o).then(v.toJson).then(v.throwErrorsIfPresent).then(q).then(function(e){var t=e.entities,o=e.result;n(t),r({lastPageFetched:l,photoIds:o.results})})}},t.prototype.removeScrollSubscription=function(){this.scrollSubscription.unsubscribe(),this.fetchSubscription&&this.fetchSubscription.unsubscribe()},t.prototype.renderCollectionResults=function(){var e=this.props.search,t=e.query,o=e.collections.results,n="/search/collections/"+t;return 0===o.length?i.default.createElement("div",null):i.default.createElement("div",{className:x.default.clearfix},i.default.createElement("div",{className:x.default.collectionResults},(0,p.default)(o,3).map(function(e){return i.default.createElement("div",{key:e.id,className:x.default.collectionResultWrapper},i.default.createElement(L.default,{key:e.id,collection:e,height:80,width:280,href:(0,c.default)(e,"links.html")}))}),i.default.createElement("div",{className:x.default.collectionsViewAllLinkContainer},i.default.createElement(l.default,{className:x.default.collectionsViewAllLink,to:{pathname:n}},"View all collections"))))},t.prototype.render=function(){var e=this.props,t=e.search,o=t.photos,n=o.total,r=o.results,a=o.maxPage,s=o.lastPageFetched,l=o.isLoading,u=t.collections,c=e.isPhone,d=e.location;return 0!==n||l?i.default.createElement(A.default,null,i.default.createElement("div",{"data-test":V.TEST_ATTRIBUTE},!u.isLoading&&this.renderCollectionResults(),c?i.default.createElement(B.default,{photos:r,location:d}):i.default.createElement(E.default,{photos:r,location:d}),s<a&&i.default.createElement(R.default,null),i.default.createElement(j.default,null))):i.default.createElement(k.default,{type:"photos"})},t}(r.Component);t.SearchPhotos=H,H.displayName="SearchPhotos",H.propTypes=F;var X=function(e){return{search:(0,w.getDenormalizedSearch)(e),isPhone:(0,b.getIsPhone)(e),searchXps:(0,y.getAllSearchXps)(e)}},G={updateData:m.updateData,addPhotosToSearchPhotoFeed:m.addPhotosToSearchPhotoFeed};t.default=(0,a.connect)(X,G)(H)},2138:function(e,t){e.exports={container:"_2vSHF _22ZDn dvlCB",clearfix:"_2Rkdl _1iK9o","sm-col":"_13jTO","sm-col-6":"_3kobr","sm-col-12":"CTQC5","md-col-3":"TBNoB","md-col-6":"_30lHv",mxn2:"_3vG8-",px2:"_1vc38","--sm-min":"(--sm-min)",hiddenPhone:"_3ofrt",colorLightGrey:"#ddd",colorGrey:"#999",colorWhite:"#fff",colorLightBlack:"#111",textAlignCenter:"_2PbEl",textTransformUppercase:"_1WCyJ",textDecorationNone:"_21rCr",collectionsViewAllLinkContainer:"U_Yq8 _13jTO _3kobr TBNoB _1vc38",collectionsViewAllLink:"_2wvHW _21rCr _2PbEl",collectionResults:"_ZPQb _1iK9o _3vG8- _3ofrt",collectionResultWrapper:"_3V_BR _13jTO _3kobr TBNoB _1vc38"}},2139:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TEST_ATTRIBUTE="search-photos-route"}});
//# sourceMappingURL=24.04e5c.main.js.map